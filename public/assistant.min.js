!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t){for(W={},W.config={local:{src:"//localhost:4000"},dev:{src:"//canvia-assistant-dev.mybluemix.net"},prd:{src:"//canvia-assistant-prd.mybluemix.net"}},W.chat=document.getElementById("kiara-conversation"),W.chat.style="display:none;",W.chat||console.error('No existe elemento "kiara-conversation"'),W.env=W.chat.getAttribute("env"),W.open=!1,W.toggleChat=function(){W.open?(W.chat.style="",W.chat.classList.remove("w-bounceInUp"),W.chat.classList.add("w-bounceOutDown"),setTimeout(function(){W.chat.style="display:none;"},1e3)):(W.chat.style="",W.chat.classList.remove("w-bounceOutDown"),W.chat.classList.add("w-bounceInUp"),setTimeout(function(){W.chat.style="display:inherit;"},1e3)),W.open=!W.open},W.triggers=document.getElementsByClassName(W.chat.getAttribute("trigger")),i=0;i<W.triggers.length;i++)W.triggers[i].addEventListener("click",function(){W.toggleChat()});W.chat.className="w-animated cuerpochat",W.chat.innerHTML='\t<div class="cabecerachat">      <img src="/chatbot/img/display.png" class="displaychat" />      <div class="IANombre">kIAra</div>      <img src="/chatbot/img/close.png" class="botonclosechat" />  </div>  <div class="cuerporespuesta scrollbar" id="scrollkiara">  </div>  <input type="text" id="mensajechat" class="enviarmensajekiara">',W.chat.querySelector(".cabecerachat").addEventListener("click",function(){W.toggleChat()}),W.input=W.chat.querySelector("#mensajechat"),W.body=W.chat.querySelector("#scrollkiara"),W.utils={getTime:function(e=null){function t(e){return e<10&&(e="0"+e),e}return e||(e=new Date),"object"!=typeof e&&console.error('Variable "date" no es un objecto!'),t(e.getHours())+":"+t(e.getMinutes())}},W.DOM={userMessage:function(e){let t=document.createElement("DIV"),n=document.createElement("DIV"),a=document.createElement("DIV");return t.className="cuerpopregunta",n.className="horapregunta",a.className="respuestausuarioch",n.appendChild(document.createTextNode(W.utils.getTime())),a.appendChild(document.createTextNode(e)),t.append(n,a),t},separator:function(){let e=document.createElement("DIV");return e.className="separacionchat",e},kiaraMessage:function(e){let t=document.createElement("DIV"),n=document.createElement("DIV"),a=document.createElement("SPAN"),r=document.createElement("DIV");return t.className="",a.className="horach",r.className="respuestakiara",n.className="kiara",a.appendChild(document.createTextNode(W.utils.getTime())),n.append(document.createTextNode("kIAra"),a),r.innerHTML=e,t.append(n,r),t}},W.context={},W.sendMessage=function(e){W.body.append(W.DOM.separator(),W.DOM.userMessage(e)),W.body.scrollTop=W.body.scrollHeight,W.api(e,function(e){W.context=e.context,console.log(e),W.receiveMessage(e.output.text.join("<br><br>"))})},W.receiveMessage=function(e){W.body.append(W.DOM.separator(),W.DOM.kiaraMessage(e)),W.body.scrollTop=W.body.scrollHeight},W.input.addEventListener("keydown",function(e){"Enter"===e.key&&(W.sendMessage(e.target.value),e.target.value="")}),W.api=function(e="",t){let n=new XMLHttpRequest;n.open("POST",W.config[W.env].src+"/api/message",!0),n.setRequestHeader("Content-type","application/json"),n.setRequestHeader("Authorization",W.chat.getAttribute("key")),n.onreadystatechange=function(){4===n.readyState&&200===n.status&&n.responseText&&t(JSON.parse(n.responseText))},n.send(JSON.stringify({input:{text:e},context:W.context}))},W.api("",function(e){W.body.append(W.DOM.kiaraMessage(e.output.text.join("<br><br>")))})}]);